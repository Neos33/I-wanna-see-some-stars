[gd_scene load_steps=18 format=3 uid="uid://qpkvcl0iv3c3"]

[ext_resource type="Texture2D" uid="uid://dxncfahux68wn" path="res://Graphics/Sprites/Neos/Boss/PlayStation 2 - SD Gundam G Generation Wars - Akatsuki Oowashi Pack.png" id="1_cy6st"]
[ext_resource type="Script" path="res://Scripts/Neos/scrGundamBoss.gd" id="1_li8o1"]
[ext_resource type="AudioStream" uid="uid://b7xe2mm2nhqin" path="res://Audio/Sounds/Neos/Boss/Chrysalis_Singing.ogg" id="3_7jhhv"]
[ext_resource type="Script" path="res://addons/2d_shapes/shapes/Ellipse.gd" id="3_rxwhi"]
[ext_resource type="Script" path="res://Objects/Neos/FiniteStateMachine.gd" id="4_ejbvf"]
[ext_resource type="Script" path="res://Objects/Neos/state_summersive.gd" id="5_62srp"]
[ext_resource type="Script" path="res://Objects/Neos/state_radio.gd" id="6_mffql"]
[ext_resource type="Script" path="res://Objects/Neos/state_shield.gd" id="7_sqbsm"]
[ext_resource type="Script" path="res://Objects/Neos/state_approch_and_slash.gd" id="7_vpqrf"]
[ext_resource type="Script" path="res://Objects/Neos/state_shotmisslles.gd" id="10_g5fgj"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_08skg"]
radius = 32.0
height = 128.0

[sub_resource type="CircleShape2D" id="CircleShape2D_iwmom"]
radius = 128.996

[sub_resource type="RectangleShape2D" id="RectangleShape2D_u6khy"]
size = Vector2(64, 88)

[sub_resource type="Animation" id="Animation_xw0lk"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PlaceHolderShapeBoss:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PlaceHolderShapeBoss/RightHand/Sword:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("PlaceHolderShapeBoss/RightHand:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-40, 24)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("PlaceHolderShapeBoss/LeftHand:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(40, -8)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("PlaceHolderShapeBoss/RightHand/Sword/SwordTip:position")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(80, 0)]
}

[sub_resource type="Animation" id="Animation_k8l24"]
resource_name = "approch_slash"
length = 4.0
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PlaceHolderShapeBoss/RightHand/Sword:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.75, 2.25, 2.45),
"transitions": PackedFloat32Array(0.5, 1, 0.5, 1),
"update": 0,
"values": [0.200713, -1.22348, -1.22348, 1.16588]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("FiniteStateMachine/StateApprochAndSlash")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(1.75, 3.2, 3.3),
"transitions": PackedFloat32Array(1, 1, 1),
"values": [{
"args": [],
"method": &"make_effect"
}, {
"args": [],
"method": &"stop_effect"
}, {
"args": [],
"method": &"finish"
}]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("PlaceHolderShapeBoss/RightHand:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 1.5),
"transitions": PackedFloat32Array(0.5, 1),
"update": 0,
"values": [Vector2(-40, 24), Vector2(7, 24)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("PlaceHolderShapeBoss/LeftHand:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.95),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(40, -8), Vector2(10, -8)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = false
tracks/4/path = NodePath("PlaceHolderShapeBoss/RightHand/Sword/SwordTip:position")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 1.75, 2.25, 2.45),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector2(80, 16), Vector2(25, -72), Vector2(25, -72), Vector2(33, 72)]
}

[sub_resource type="Animation" id="Animation_k4di0"]
resource_name = "summersive_ground"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PlaceHolderShapeBoss:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, -4.71239]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("FiniteStateMachine/StateSummersive")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.866667),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"going_down"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_qrhxp"]
_data = {
"RESET": SubResource("Animation_xw0lk"),
"approch_slash": SubResource("Animation_k8l24"),
"summersive_ground": SubResource("Animation_k4di0")
}

[node name="objGundamBoss" type="CharacterBody2D"]
collision_layer = 8
collision_mask = 0
script = ExtResource("1_li8o1")

[node name="RobotPart" type="Node2D" parent="."]
visible = false

[node name="fly" type="Sprite2D" parent="RobotPart"]
position = Vector2(176, 152)
texture = ExtResource("1_cy6st")
region_enabled = true
region_rect = Rect2(144, 520, 216, 56)

[node name="arm_gun" type="Sprite2D" parent="RobotPart"]
position = Vector2(40, 256)
texture = ExtResource("1_cy6st")
region_enabled = true
region_rect = Rect2(0, 56, 128, 120)

[node name="arm_gun5" type="Sprite2D" parent="RobotPart"]
position = Vector2(240, 232)
texture = ExtResource("1_cy6st")
region_enabled = true
region_rect = Rect2(336, 424, 112, 64)

[node name="arm_gun3" type="Sprite2D" parent="RobotPart"]
position = Vector2(96, 232)
texture = ExtResource("1_cy6st")
region_enabled = true
region_rect = Rect2(128, 56, 80, 88)

[node name="head" type="Sprite2D" parent="RobotPart"]
position = Vector2(112, 168)
texture = ExtResource("1_cy6st")
region_enabled = true
region_rect = Rect2(0, 176, 136, 112)

[node name="arm_gun2" type="Sprite2D" parent="RobotPart"]
position = Vector2(360, 176)
texture = ExtResource("1_cy6st")
region_enabled = true
region_rect = Rect2(0, 0, 80, 56)

[node name="arm_gun4" type="Sprite2D" parent="RobotPart"]
position = Vector2(280, 304)
texture = ExtResource("1_cy6st")
region_enabled = true
region_rect = Rect2(240, 344, 56, 40)

[node name="arm_hand" type="Sprite2D" parent="RobotPart"]
position = Vector2(184, 216)
texture = ExtResource("1_cy6st")
region_enabled = true
region_rect = Rect2(136, 200, 96, 48)

[node name="PlaceHolderShapeBoss" type="Node2D" parent="."]

[node name="LeftHand" type="Node2D" parent="PlaceHolderShapeBoss"]
position = Vector2(40, -8)
script = ExtResource("3_rxwhi")
size = Vector2(20, 20)

[node name="Body" type="Polygon2D" parent="PlaceHolderShapeBoss"]
color = Color(1, 0.45, 0.45, 1)
polygon = PackedVector2Array(0, 64, 32, 0, 0, -64, -32, -64, -32, 64)

[node name="DamageHitbox" type="Area2D" parent="PlaceHolderShapeBoss"]
collision_layer = 0
collision_mask = 16

[node name="CollisionShape2D" type="CollisionShape2D" parent="PlaceHolderShapeBoss/DamageHitbox"]
shape = SubResource("CapsuleShape2D_08skg")

[node name="ShieldHitbox" type="Area2D" parent="PlaceHolderShapeBoss"]
collision_layer = 0
collision_mask = 16

[node name="CollisionShape2D" type="CollisionShape2D" parent="PlaceHolderShapeBoss/ShieldHitbox"]
shape = SubResource("CircleShape2D_iwmom")
disabled = true

[node name="RightHand" type="Node2D" parent="PlaceHolderShapeBoss"]
position = Vector2(-40, 24)
script = ExtResource("3_rxwhi")
size = Vector2(20, 20)

[node name="Sword" type="Polygon2D" parent="PlaceHolderShapeBoss/RightHand"]
color = Color(1, 0.818, 0.48, 1)
polygon = PackedVector2Array(80, 0, 0, -16, 0, 16)

[node name="SwordHitbox" type="StaticBody2D" parent="PlaceHolderShapeBoss/RightHand/Sword" groups=["Killers"]]
collision_layer = 8
collision_mask = 0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="PlaceHolderShapeBoss/RightHand/Sword/SwordHitbox"]
polygon = PackedVector2Array(0, -16, 80, 0, 0, 16)

[node name="SwordTip" type="Node2D" parent="PlaceHolderShapeBoss/RightHand/Sword"]
position = Vector2(80, 0)

[node name="ColorRect" type="ColorRect" parent="PlaceHolderShapeBoss/RightHand/Sword/SwordTip"]
visible = false
offset_right = 8.0
offset_bottom = 8.0

[node name="BossHitbox" type="CollisionShape2D" parent="."]
position = Vector2(0, 4)
shape = SubResource("RectangleShape2D_u6khy")
debug_color = Color(0.953069, 0.152403, 0.397168, 0.42)

[node name="HPText" type="Label" parent="."]
offset_left = -24.0
offset_top = 72.0
offset_right = 16.0
offset_bottom = 95.0
theme_override_constants/outline_size = 3
text = "HP: "

[node name="DebugStateName" type="Label" parent="."]
offset_left = -160.0
offset_top = -88.0
offset_right = 160.0
offset_bottom = -65.0
theme_override_constants/outline_size = 3
text = "debug"
horizontal_alignment = 1

[node name="AudioAISinging" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("3_7jhhv")
max_distance = 300.0
panning_strength = 3.0
bus = &"Sounds"

[node name="FiniteStateMachine" type="Node2D" parent="." node_paths=PackedStringArray("controlled_object")]
script = ExtResource("4_ejbvf")
controlled_object = NodePath("..")

[node name="StateSummersive" type="Node" parent="FiniteStateMachine"]
script = ExtResource("5_62srp")

[node name="StateRadio" type="Node" parent="FiniteStateMachine"]
script = ExtResource("6_mffql")

[node name="StateApprochAndSlash" type="Node" parent="FiniteStateMachine"]
script = ExtResource("7_vpqrf")

[node name="StateShield" type="Node" parent="FiniteStateMachine"]
script = ExtResource("7_sqbsm")

[node name="StateMissiles" type="Node" parent="FiniteStateMachine"]
script = ExtResource("10_g5fgj")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_qrhxp")
}

[node name="RadioSpawnPeriod" type="Timer" parent="."]
wait_time = 0.2

[node name="MissileShotPeriod" type="Timer" parent="."]
wait_time = 1.3

[connection signal="body_entered" from="PlaceHolderShapeBoss/DamageHitbox" to="." method="_on_damage_hitbox_body_entered"]
[connection signal="body_entered" from="PlaceHolderShapeBoss/ShieldHitbox" to="FiniteStateMachine/StateShield" method="_on_shield_hitbox_body_entered"]
[connection signal="timeout" from="RadioSpawnPeriod" to="FiniteStateMachine/StateRadio" method="_on_radio_spawn_period_timeout"]
[connection signal="timeout" from="MissileShotPeriod" to="FiniteStateMachine/StateMissiles" method="_on_missile_shot_period_timeout"]
